<html xmlns="http://www.w3.org/1999/html">

<head>
	<title>Learn FHIR- Creating a Sandbox</title>
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
	<link rel="stylesheet" href="../../../index.css" />

	<!-- jQuery library -->
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

	<!-- Latest compiled JavaScript -->
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>


</head>

<body>

<!-- basic header -->

<div class="container">
	<nav class="navbar navbar-custom">
		<div class="navbar-header">
			<button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
				<span class="sr-only">Toggle navigation</span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
				<span class="icon-bar"></span>
			</button>
			<span class="navbar-brand">LearnFHIR - FHIR Server Sandbox</span>
		</div>
		<div class="collapse navbar-collapse" id="navbar">
			<ul class="nav navbar-nav navbar-right">
				<li><a href="../../../index.html">Home</a></li>
				<li><a href="http://github.com/learnfhir" target="_blank">GitHub</a></li>
				<li><a href="../../../pages/references/references.html">References</a></li>
			</ul>
		</div>
	</nav>
</div>

<!-- main content -->

<!-- left nav panel -->
	<div class="container">
		<div class="col-md-3" role="navigation">
			<div>
				<h3>Creating a FHIR Server</h3>
				<small style="padding-top:0px">Build a FHIR server sandbox</small>
			</div>
			<hr>
            <ul class="nav nav-pills nav-stacked" data-tabs="tabs">
                <li class="active"><a href="#serverIntro" data-toggle="tab">Introduction</a></li>
                <li><a href="#serverStep1" data-toggle="tab">Step 1: Signing Up</a></li>
                <li><a href="#serverStep2" data-toggle="tab">Step 2: Creating a Server</a></li>
                <li><a href="#serverStep3" data-toggle="tab">Step 3: Setting Access Policy</a></li>
                <li><a href="#serverStep4" data-toggle="tab">Step 4: Making Your First Query</a></li>
                <li><a href="#serverStep5" data-toggle="tab">Step 5: Putting Data in Your Server</a></li>
			</ul>
		</div>
        <div class="col-md-9 tab-content" style="font-family: Century Gothic, sans-serif;">

            <!-- Main content panel -->
            <div id="serverIntro" class="tab-pane fade in active">
                <h2 class="text-center">Introduction</h2>
                <hr>
                <div>
                <p>
                    In this tutorial we will create a FHIR server that can then be used as a sandox for future development. Creating a FHIR server from scratch can be a time consuming process. There are a variety of pre-built solutions out there including open-source options. In creating this tutorial I was looking for something that works quickly out-of-the-box with minimal low level coding. Basically, I want you, the learner, to be able to spend your time working with FHIR, rather than having to spend a lot of time installing and getting the server to run correctly.
                </p>
                    <p>
                    Thankfully, the folks at <a href="http://health-samurai.io/">Health Samurai</a> have created a free solution that meets the criteria above. Their product - <a href="http://aidbox.io">AidBox.io</a> - is a nice option for getting up and running quickly.
                    </p>
                    <br>
                    <div class="text-center">
                        <img src="../../../public/FHIRserver/aidboxhome.png" width="60%">
                    </div>
                    <br>
                    <p>
                    The remainder of this tutorial will show how to get up and running with Aidbox, and perform basic Read and Write FHIR functions on your own FHIR sandbox.
                    </p>
                    <p>
                    Disclosure: I have no financial or other connection with <a href="http://health-samurai.io/">Health Samurai</a>. AioBox.io just happens to be the fastest and easiset solution I have come across on the web.
                    </p>
                    <p>
                    Other options include:
                    </p>
                    <ul>
                        <li><a href="http://spark.furore.com">Spark Furore</a> - an open-source C# implementation</li>
                        <li><a href="https://github.com/clinical-meteor/meteor-on-fhir">Meteor-On-FHIR</a> a Meteor/NodeJS implementation (although I was not able to get it running)</li>
                    </ul>

                </div>
            </div>

            <div id="serverStep1" class="tab-pane fade">
                <h2 class="text-center">Step 1: Signing Up</h2>
                <hr>
                <div class="row">
                    <p>The sign-up process is about as simple as it can be. Register on the website by entering your name, company name, and email. You will receive a confirmation email that has a link in it. When you click the link you will be brought back to the AidBox.io website and asked to enter a password.</p>
                    <br>
                    <div class="row">
                        <div class="col-md-6 text-center">
                            <img src="../../../public/FHIRserver/registration.png" width="80%">
                        </div>
                        <div class="col-md-6 text-center">
                            <img src="../../../public/FHIRserver/confirmation.png" width="80%">
                        </div>
                    </div>
                    <br>
                    <div class="row">
                        <p>Voila! Wasn't that easy?</p>
                        <p>Now just log in to your new account and proceed to the next step.</p>
                    </div>
                </div>
            </div>

            <div id="serverStep2" class="tab-pane fade">
                <h2 class="text-center">Step 2: Creating a Server</h2>
                <hr>
                <p>Once you've logged in to your new AidBox account you should see the screen below. There is only one more step before you have your FHIR server up and running, and that is creating a "Box".</p>
                <br>
                <div class="row">
                    <div class="text-center">
                        <img src="../../../public/FHIRserver/firstlogin.png" width="90%">
                    </div>
                </div>
                <br>
                <p>Simply give your FHIR server "Box" a unique name and click "Create". A new server will be created and you will see a link to it appear in a box on your AidBox Dasboard, like this:</p>
                <br>
                <div class="row">
                    <div class="text-center">
                        <img src="../../../public/FHIRserver/createanewbox.png" width="90%">
                    </div>
                </div>
                <br>
                <div class="row">
                    <p>Click on the link to your new box and proceed to the next step.</p>
                </div>
            </div>

            <div id="serverStep3" class="tab-pane fade">
                <h2 class="text-center">Step 3: Setting Access Policy</h2>
                <hr>
                <div class="row">
                    <p>The last piece of the puzzle to get your server up and running (so that you can easily access it from an outside client) is to set up the security policy. FHIR allows you to set the access policy on a resource by resource level. The policy that we will set up is blank, meaning that anyone, anywhere can connect to your server and read, write, and delete any data. This is obviously not the security policy you would use for a production server, but for playing in the sandbox, it is a perfect place to start.</p>
                    <br>
                    <p>Select "Security" from the left hand menu bar. You should see the following screen:</p>
                </div>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/createpolicy.png" width="90%">
                </div>
                <br>
                <p>Give your new securty access policy an Id, Title, and Description. In the Policy box below, you want to enter one set of open and closed braces: <code>{}</code>. Then scroll to the bottom of the screen and select "Create".</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/createpolicy2.png" width="90%">
                </div>
                <br>
                <p>You should now see the policy you've created show up in the Policy list. If you click on the title of your Policy in the list you will again see the Id, Title, Description, and policy code that you just created. You can make changes and save this policy again if needed.</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/createpolicy3.png" width="90%">
                </div>
                <br>
                <p>Now that we opened all the doors to our server, proceed to the next step and let's take it for a test drive.</p>
            </div>

            <div id="serverStep4" class="tab-pane fade">
                <h2 class="text-center">Step 4: Making Your First Query</h2>
                <hr>
                <div>
                    <p>To test if your server and access policies are working, open a new web browser window, and enter the FHIR endpoint URL for your personal AidBox. This will consist of the name you chose for your box plus ".aidbox.io/fhir/". For instance, the AidBox created for this website is <code>http://learnFHIR.aidbox.io/fhir</code></p>
                    <br>
                    <p>If you enter that into the address bar of your web browser you should see something like the following:</p>
                </div>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/browserquery.png" width="90%">
                </div>
                <br>
                <div>
                    <p>The text you see displayed in the browser window is the Conformance Statement for your FHIR server. This is a data structure that tells anyone who is interested what FHIR Resources are available from your server (among other things).</p>
                    <br>
                    <p>If you can see the Conformance Statement, congratulations! You are up and running with your own private FHIR server. You are officially part of the future of healthcare interoperability.</p>
                    <br>
                    <p>AidBox also provides a slick interface for testing your RESTful endpoint (<code>http://[your-server-name]/fhir/</code>). If you return to the AidBox Dashboard and select "REST Console" from the left side menubar, you will see the following screen:</p>
                </div>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/firstFHIRquery.png" width="90%">
                </div>
                <br>
                <div>
                    <p>AidBox also conveniently gives a number of sample FHIR resource interactions along the right hand side of the screen. Experimenting with those samples is a good way of becoming familiar with a wide variety of FHIR functions.</p>
                    <br>
                    <p>In the center of the screen is a dropdown list that allows you to choose from the standard RESTful interactions: GET, PUT, POST, DELETE. To retrieve information from a FHIR resource we want to select "GET". To GET a list of patients we point our FHIR URL at <code>/fhir/patient</code> and click the execute button (or control-enter). Try this in your server and you should see a screen like this:</p>
                </div>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/firstFHIRquery2.png" width="90%">
                </div>
                <br>
                <p>You can see that the FHIR query returned a "Bundle" of information. However, this bundle returned a total of 0 objects. Why? Because we don't yet have any information in our FHIR database to find!</p>
                <br>
                <p>The last step in our tutorial will be putting some sample data onto the FHIR server, so when we do a query we have something to find.</p>
            </div>

            <div id="serverStep5" class="tab-pane fade">
                <h2 class="text-center">Step 5: Putting Data in Your Server</h2>
                <hr>
                <p>AidBox also provides a variety of premade FHIR interactions including reading and writing information from the server. Lets use one of these pre-made calls first just to see what the interaction looks like.</p>
                <br>
                <p>Scroll down the options along the right side of the REST Console dashboard until you find the one called "Create Patient Adam". Notice that the REST call has changed from <code>GET</code> to <code>POST</code>. A <code>POST</code> call will create new information in the database.</p>
                <br>
                <p>The URL is pointed at the "Patient" resources <code>http://[server]/fhir/Patient</code>. The JSON data object shown direclty below the URL is the Patient object that will be added to the database.</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/easycreate.png" width="90%">
                </div>
                <br>
                <p>Click the "Execute" button and you should see the following:</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/easycreateresponse.png" width="90%">
                </div>
                <br>
                <p>The Response body will echo the same Patient data object that was just added to the FHIR database. You can explore the data object itself by clicking on the individual data items and drilling into the object substructure. You can also change the display method from "Pretty" to "Raw" and look at the full JSON of the patient resource:</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/easycreateresponseraw.png" width="90%">
                </div>
                <br>
                <p>Now create a new FHIR request by selecting <code>GET</code>, typing <code>/fhir/Patient</code> into the URL, and clicking execute. This creates a FHIR query for all the patients in the database. Once you execute the query you should see the following response:</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/getpatient.png" width="90%">
                </div>
                <br>
                <p>Notice that the bundle now contains 1 entry. If you drill down into the <code>entry</code> section of the reponse you will see the patient information for "Adam", the simulated patient that you added to the database in the previous step.</p>
                <br>
                <p>Let's do this again, but instead of using the pre-formatted AidBox example well make our own Patient resource. This time, change the REST function to <code>POST</code> and enter <code>/fhir/Patient</code> at the URL.</p>
                <br>
                <p>In the data console below the URL copy and paste the text below:</p>
                <pre>
{
	"birthDate" : "1981-09-21",
	"resourceType" : "Patient",
	"active" : true,
	"gender" : "male"
}
		</pre>
                <p>You can change the birthdate and gender of the data object, but don't change the resource type or active value, otherwise the FHIR call will not work as expected.</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/simplepatient.png" width="90%">
                </div>
                <br>
                <p>Once you click <code>Execute</code> you should see the following, where the <code>Response</code> body echoes the data structure that you created. Notice that in addition to the data fields that you created additional fields for <code>id</code> and <code>meta</code> data were added automatically. This is expected. The <code>ID</code> value is unique to the database, and provides a way to reference the FHIR resource directly.</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/simplepatient2.png" width="90%">
                </div>
                <br>
                <p>Finally, if you perform a <code>GET</code> call on the URL <code>/fhir/Patient</code> and execute you will see the following:</p>
                <div class="row text-center">
                    <img src="../../../public/FHIRserver/getpatient2.png" width="90%">
                </div>
                <br>
                <p>Notice that the returned <code>bundle</code> now contains two data objects - the sample patient created with the help of the AidBox example FHIR calls listed on the right hand side of the screen as well as the basic patient resource that you created above. Using the "pretty" display of the response body you can drill down into the data and confirm the contents for yourself.</p>
                <br>
                <h3 class="text-center">Congratulations! You have completed the FHIR server tutorial!</h3>
            </div>
            <br/>
            <br/>
        </div>
    </div>

</body>
</html>